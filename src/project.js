window.__require=function t(e,i,n){function c(s,a){if(!i[s]){if(!e[s]){var r=s.split("/");if(r=r[r.length-1],!e[r]){var u="function"==typeof __require&&__require;if(!a&&u)return u(r,!0);if(o)return o(r,!0);throw new Error("Cannot find module '"+s+"'")}}var h=i[s]={exports:{}};e[s][0].call(h.exports,function(t){return c(e[s][1][t]||t)},h,h.exports,t,e,i,n)}return i[s].exports}for(var o="function"==typeof __require&&__require,s=0;s<n.length;s++)c(n[s]);return c}({Game:[function(t,e,i){"use strict";cc._RF.push(e,"e8970l6pQpM55S9L9NYPCqi","Game"),cc.Class({extends:cc.Component,properties:{starPrefab:{default:null,type:cc.Prefab},maxStarDuration:0,minStarDuration:0,ground:{default:null,type:cc.Node},player:{default:null,type:cc.Node},scoreDisplay:{default:null,type:cc.Label},scoreAudio:{default:null,type:cc.AudioClip}},onLoad:function(){this.groundY=this.ground.y+this.ground.height/2,this.spawnNewStar(),this.timer=0,this.starDuration=1e3,this.score=0},start:function(){},update:function(t){this.timer>this.starDuration?this.gameOver():this.timer+=t},spawnNewStar:function(){var t=cc.instantiate(this.starPrefab);this.node.addChild(t),t.setPosition(this.getNewStarPosition()),t.getComponent("Star").game=this,this.starDuration=this.minStarDuration+Math.random()*(this.maxStarDuration-this.minStarDuration),this.timer=0},getNewStarPosition:function(){var t,e=this.groundY+Math.random()*this.player.getComponent("Player").jumpHeight+50,i=this.node.width/2;return t=2*(Math.random()-.5)*i,cc.v2(t,e)},gainScore:function(){this.score+=1,this.scoreDisplay.string="Score: "+this.score,cc.audioEngine.playEffect(this.scoreAudio,!1)},gameOver:function(){this.player.stopAllActions(),cc.director.loadScene("game"),console.log("game over")}}),cc._RF.pop()},{}],Ground:[function(t,e,i){"use strict";cc._RF.push(e,"92307sfRM5FaKbNEdY3vWRK","Ground"),cc.Class({extends:cc.Component,start:function(){},onBeginContact:function(t,e,i){console.log(i),i.getComponent("Guagua").onMissed()}}),cc._RF.pop()},{}],GuaMieGame:[function(t,e,i){"use strict";cc._RF.push(e,"909f7YBvWFMy58xyKlyNrek","GuaMieGame"),cc.Class({extends:cc.Component,properties:{debugLabel:{default:null,type:cc.Label},guaguaPrefab:{default:null,type:cc.Prefab},miemie:{default:null,type:cc.Node},scoreLabel:{default:null,type:cc.Label},healtPointLabel:{default:null,type:cc.Label}},onLoad:function(){this.score=0,this.healthPoint=5,this.scoreLabel.string="Score: "+this.score,this.healtPointLabel.string="HP: "+this.healthPoint,cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().debugDrawFlags=cc.PhysicsManager.DrawBits.e_aabbBit|cc.PhysicsManager.DrawBits.e_pairBit|cc.PhysicsManager.DrawBits.e_centerOfMassBit|cc.PhysicsManager.DrawBits.e_jointBit|cc.PhysicsManager.DrawBits.e_shapeBit,cc.director.getPhysicsManager().debugDrawFlags=0,this.schedule(this.spawnNewGuagua,3),this.node.on(cc.Node.EventType.MOUSE_MOVE,this.onMove,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onMove,this)},start:function(){},onDestroy:function(){},spawnNewGuagua:function(){var t=cc.instantiate(this.guaguaPrefab);this.node.addChild(t),t.setPosition(cc.v2(0,this.node.height/2-40)),console.log(t);var e=t.getComponent("cc.RigidBody");e.linearVelocity=cc.v2(1e3*(Math.random()-.5),1e3*Math.random()),e.fixedRotation=!0,console.log(t.getComponent("Guagua")),t.getComponent("Guagua").game=this},onMove:function(t){var e=this.node.convertToNodeSpaceAR(t.getLocation()),i=this.miemie.position;this.miemie.setPosition(e.x,i.y)},gainScore:function(){this.score+=1,this.scoreLabel.string="Score: "+this.score},loseHealthPoint:function(){this.healthPoint-=1,this.healtPointLabel.string="HP: "+this.healthPoint}}),cc._RF.pop()},{}],Guagua:[function(t,e,i){"use strict";cc._RF.push(e,"fb9deu0J3NByYMtKZQFnuIr","Guagua"),cc.Class({extends:cc.Component,properties:{catchedFXPrefab:{default:null,type:cc.Prefab}},onLoad:function(){},start:function(){},onCatched:function(){if(this.game){this.node.removeComponent("cc.RigidBody");var t=cc.instantiate(this.catchedFXPrefab);this.node.addChild(t),t.setPosition(this.node.position),this.game.gainScore();var e=this.getComponent(cc.Animation);e.play("leave"),e.on("finished",function(){this.node.destroy()},this)}},onMissed:function(){if(this.game){this.node.removeComponent("cc.RigidBody"),this.game.loseHealthPoint();var t=this.getComponent(cc.Animation);t.play("leave"),t.on("finished",function(){this.node.destroy()},this)}}}),cc._RF.pop()},{}],HelloWorld:[function(t,e,i){"use strict";cc._RF.push(e,"280c3rsZJJKnZ9RqbALVwtK","HelloWorld"),cc.Class({extends:cc.Component,properties:{label:{default:null,type:cc.Label},text:"Hello, World!"},onLoad:function(){this.label.string=this.text},update:function(t){}}),cc._RF.pop()},{}],Miemie:[function(t,e,i){"use strict";cc._RF.push(e,"5930aByuuhL1a/U7TmIU0hG","Miemie"),cc.Class({extends:cc.Component,properties:{debugLabel:{default:null,type:cc.Label}},onLoad:function(){this.heartBeatAction=this.setHeartBeatAction(),this.node.runAction(this.heartBeatAction)},start:function(){},setHeartBeatAction:function(){var t=cc.scaleTo(.5,1.2,.8).easing(cc.easeCubicActionIn()),e=cc.scaleTo(.5,1,1).easing(cc.easeCircleActionOut());return cc.repeatForever(cc.sequence(t,e))},onBeginContact:function(t,e,i){console.log(i),i.getComponent("Guagua").onCatched()}}),cc._RF.pop()},{}],PhysicsBound:[function(t,e,i){"use strict";cc._RF.push(e,"0e51bbN9D1BsLnAPPIW5bcN","PhysicsBound"),cc.Class({extends:cc.Component,properties:{size:cc.size(0,0),mouseJoint:!0},onLoad:function(){var t=this.size.width||this.node.width,e=this.size.height||this.node.height,i=new cc.Node;(i.addComponent(cc.RigidBody).type=cc.RigidBodyType.Static,this.mouseJoint)&&(i.addComponent(cc.MouseJoint).mouseRegion=this.node);this._addBound(i,0,e/2,t,20),this._addBound(i,0,-e/2,t,20),this._addBound(i,-t/2,0,20,e),this._addBound(i,t/2,0,20,e),i.parent=this.node},start:function(){},_addBound:function(t,e,i,n,c){var o=t.addComponent(cc.PhysicsBoxCollider);o.offset.x=e,o.offset.y=i,o.size.width=n,o.size.height=c}}),cc._RF.pop()},{}],Player:[function(t,e,i){"use strict";cc._RF.push(e,"b1d45Rl9oBHk70k4InK93We","Player"),cc.Class({extends:cc.Component,properties:{jumpHeight:0,jumpDuration:0,maxMoveSpeed:0,acceleration:0,jumpAudio:{default:null,type:cc.AudioClip}},onLoad:function(){this.jumpAction=this.setJumpAction(),this.node.runAction(this.jumpAction),this.accLeft=!1,this.accRight=!1,this.xSpeed=0,cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},start:function(){},update:function(t){this.accLeft?this.xSpeed-=this.acceleration*t:this.accRight&&(this.xSpeed+=this.acceleration*t),Math.abs(this.xSpeed)>this.maxMoveSpeed&&(this.xSpeed=this.maxMoveSpeed*this.xSpeed/Math.abs(this.xSpeed)),this.node.x+=this.xSpeed*t},onDestroy:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},setJumpAction:function(){var t=cc.moveBy(this.jumpDuration,cc.v2(0,this.jumpHeight)).easing(cc.easeCubicActionOut()),e=cc.moveBy(this.jumpDuration,cc.v2(0,-this.jumpHeight)).easing(cc.easeCubicActionIn()),i=cc.callFunc(this.playJumpSound,this);return cc.repeatForever(cc.sequence(t,e,i))},onKeyDown:function(t){switch(t.keyCode){case cc.macro.KEY.a:this.accLeft=!0;break;case cc.macro.KEY.d:this.accRight=!0}},onKeyUp:function(t){switch(t.keyCode){case cc.macro.KEY.a:this.accLeft=!1;break;case cc.macro.KEY.d:this.accRight=!1;break;case cc.macro.KEY.s:this.node.X=this.initX}},playJumpSound:function(){cc.audioEngine.playEffect(this.jumpAudio,!1)}}),cc._RF.pop()},{}],Star:[function(t,e,i){"use strict";cc._RF.push(e,"d87a2e99kFDXo5ryXS0VDnd","Star"),cc.Class({extends:cc.Component,properties:{pickRadius:0},start:function(){},update:function(t){if(this.getPlayerDistance()<this.pickRadius)this.onPicked();else{var e=1-this.game.timer/this.game.starDuration;this.node.opacity=50+Math.floor(205*e)}},getPlayerDistance:function(){var t=this.game.player.getPosition();return this.node.position.sub(t).mag()},onPicked:function(){this.game.spawnNewStar(),this.node.destroy(),this.game.gainScore()}}),cc._RF.pop()},{}]},{},["Game","Ground","GuaMieGame","Guagua","HelloWorld","Miemie","PhysicsBound","Player","Star"]);